<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Awesome Gradients</title>
  <!-- this is the embed things -->
   
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <a href="https://github.com/tmrxdev/awesome-gradients" class="github-corner" aria-label="View on GitHub" target="_blank" rel="noopener noreferrer">
    <svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 
               C122.0,82.7 120.5,78.6 120.5,78.6 
               C119.2,72.0 123.4,76.3 123.4,76.3 
               C127.3,80.9 125.5,87.3 125.5,87.3 
               C122.9,97.6 130.6,101.9 134.4,103.2"
            fill="currentColor" class="octo-arm"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 
               L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 
               C133.8,88.0 127.5,74.4 143.8,58.0 
               C148.5,53.4 154.0,51.2 159.7,51.0 
               C160.3,49.4 163.2,43.6 171.4,40.1 
               C171.4,40.1 176.1,42.5 178.8,56.2 
               C183.1,58.6 187.2,61.8 190.9,65.4 
               C194.5,69.0 197.7,73.2 200.1,77.6 
               C213.8,80.2 216.3,84.9 216.3,84.9 
               C212.7,93.1 206.9,96.0 205.4,96.6 
               C205.1,102.4 203.0,107.8 198.3,112.5 
               C181.9,128.9 168.3,122.5 157.7,114.1 
               C157.9,116.9 156.7,120.9 152.7,124.9 
               L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
            fill="currentColor" class="octo-body"></path>
    </svg>
  </a>

  <div id="container" role="main" aria-label="Gradient preview area">
    <div id="gradientBox" aria-live="polite" aria-atomic="true"></div>
    <canvas id="noiseCanvas" aria-hidden="true"></canvas>
  </div>

  <div class="toolbar" role="toolbar" aria-label="Gradient controls">
    <label>Color 1
      <input type="color" id="color1" value="#ff0080" aria-label="First gradient color" />
    </label>
    <label>Color 2
      <input type="color" id="color2" value="#7928ca" aria-label="Second gradient color" />
    </label>
    <label>Type
      <select id="gradientType" aria-label="Gradient type selector">
        <option value="linear">Linear</option>
        <option value="radial">Radial</option>
        <option value="conic">Conic (Downloading Broken)</option>
      </select>
    </label>
    <label>Angle
      <input type="range" id="angle" min="0" max="360" value="45" aria-label="Gradient angle" />
    </label>
    <label>Noise
      <input disabled type="checkbox" id="noiseToggle" checked aria-label="Toggle noise overlay" />
    </label>
    <button id="randomBtn" aria-label="Generate random gradient">Random</button>
    <button id="downloadBtn" aria-label="Download gradient image">Download</button>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script> <!--export gradient thing-->
  <script>
    const gradientBox = document.getElementById('gradientBox');
    const noiseCanvas = document.getElementById('noiseCanvas');
    const ctxNoise = noiseCanvas.getContext('2d');
    const color1Input = document.getElementById('color1');
    const color2Input = document.getElementById('color2');
    const gradientTypeSelect = document.getElementById('gradientType');
    const angleInput = document.getElementById('angle');
    const noiseToggle = document.getElementById('noiseToggle');
    const randomBtn = document.getElementById('randomBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    function resize() {
      noiseCanvas.width = window.innerWidth;
      noiseCanvas.height = window.innerHeight;
    }
    function drawNoise() {
      const w = noiseCanvas.width;
      const h = noiseCanvas.height;
      const imageData = ctxNoise.createImageData(w, h);
      const data = imageData.data;
      for(let i=0; i<data.length; i+=4){
        const shade = Math.random()*255;
        data[i] = shade;
        data[i+1] = shade;
        data[i+2] = shade;
        data[i+3] = Math.random()*30 + 10;
      }
      ctxNoise.putImageData(imageData, 0, 0);
   }

    function updateGradient() {
      const c1 = color1Input.value;
      const c2 = color2Input.value;
      const type = gradientTypeSelect.value;
      const angle = angleInput.value;

      let gradientCSS = '';
      if(type === 'linear'){
        gradientCSS = `linear-gradient(${angle}deg, ${c1}, ${c2})`;
      } else if(type === 'radial'){
        gradientCSS = `radial-gradient(circle, ${c1}, ${c2})`;
      } else if(type === 'conic'){
        gradientCSS = `conic-gradient(from ${angle}deg, ${c1}, ${c2})`;
      }

      gradientBox.style.backgroundImage = gradientCSS;
      noiseCanvas.style.display = noiseToggle.checked ? 'block' : 'none';
    }

    function randomColor(){
      return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6,'0');
    }

    function randomGradient(){
      color1Input.value = randomColor();
      color2Input.value = randomColor();
      angleInput.value = Math.floor(Math.random()*361);
      gradientTypeSelect.value = ['linear','radial','conic'][Math.floor(Math.random()*3)];
      updateGradient();
      drawNoise();
    }

    randomBtn.addEventListener('click', () => {
      randomGradient();
    });

    [color1Input, color2Input, gradientTypeSelect, angleInput, noiseToggle].forEach(el=>{
      el.addEventListener('input', updateGradient);
     });

    downloadBtn.addEventListener('click', () => {
      // (!) change if fixed
      if(gradientTypeSelect.value === 'conic'){
        alert('Conic gradients cant be downloaded right now, if you know how to fix this, contribute to the Github!');
        return;
      }
      html2canvas(gradientBox).then(canvas => {
        const link = document.createElement('a');
        link.download = 'gradient.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
      });
    });

    window.addEventListener('resize', () => {
      resize();
      drawNoise();
});

    resize();
    updateGradient();
    drawNoise();
  </script>
</body>
</html>
